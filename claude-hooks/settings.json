{
  "hooks": {
    "UserPromptSubmit": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "node /root/.claude/hooks/bullshit-radar.cjs",
            "timeout": 5,
            "env": {
              "SPECMEM_PROJECT_PATH": "${cwd}"
            }
          }
        ]
      },
      {
        "hooks": [
          {
            "type": "command",
            "command": "node /root/.claude/hooks/specmem-drilldown-hook.js",
            "timeout": 30,
            "statusMessage": "Searching SpecMem...",
            "env": {
              "SPECMEM_PROJECT_PATH": "${cwd}",
              "SPECMEM_RUN_DIR": "${cwd}/specmem/sockets",
              "SPECMEM_EMBEDDING_SOCKET": "${cwd}/specmem/sockets/embeddings.sock",
              "SPECMEM_SEARCH_LIMIT": "5",
              "SPECMEM_THRESHOLD": "0.25",
              "SPECMEM_MAX_CONTENT": "300"
            }
          }
        ]
      },
      {
        "hooks": [
          {
            "type": "command",
            "command": "node /root/.claude/hooks/input-aware-improver.js",
            "timeout": 15,
            "env": {
              "SPECMEM_PROJECT_PATH": "${cwd}",
              "SPECMEM_RUN_DIR": "${cwd}/specmem/sockets",
              "SPECMEM_EMBEDDING_SOCKET": "${cwd}/specmem/sockets/embeddings.sock",
              "SPECMEM_SEARCH_LIMIT": "5",
              "SPECMEM_THRESHOLD": "0.25",
              "SPECMEM_MAX_CONTENT": "300"
            }
          }
        ]
      }
    ],
    "PreToolUse": [
      {
        "matcher": "Read",
        "hooks": [
          {
            "type": "command",
            "command": "node /root/.claude/hooks/team-comms-enforcer.cjs",
            "timeout": 2,
            "env": { "SPECMEM_PROJECT_PATH": "${cwd}" }
          },
          {
            "type": "command",
            "command": "node /root/.claude/hooks/smart-context-hook.js",
            "timeout": 8,
            "env": {
              "SPECMEM_HOME": "/root/.specmem",
              "SPECMEM_PKG": "/specmem",
              "SPECMEM_RUN_DIR": "${cwd}/specmem/sockets",
              "SPECMEM_EMBEDDING_SOCKET": "${cwd}/specmem/sockets/embeddings.sock",
              "SPECMEM_PROJECT_PATH": "${cwd}",
              "SPECMEM_SEARCH_LIMIT": "3",
              "SPECMEM_THRESHOLD": "0.25",
              "SPECMEM_MAX_CONTENT": "150"
            }
          }
        ]
      },
      {
        "matcher": "Edit",
        "hooks": [
          {
            "type": "command",
            "command": "node /root/.claude/hooks/team-comms-enforcer.cjs",
            "timeout": 2,
            "env": { "SPECMEM_PROJECT_PATH": "${cwd}" }
          }
        ]
      },
      {
        "matcher": "Write",
        "hooks": [
          {
            "type": "command",
            "command": "node /root/.claude/hooks/team-comms-enforcer.cjs",
            "timeout": 2,
            "env": { "SPECMEM_PROJECT_PATH": "${cwd}" }
          }
        ]
      },
      {
        "matcher": "Grep",
        "hooks": [
          {
            "type": "command",
            "command": "node /root/.claude/hooks/team-comms-enforcer.cjs",
            "timeout": 2,
            "env": { "SPECMEM_PROJECT_PATH": "${cwd}" }
          },
          {
            "type": "command",
            "command": "node /root/.claude/hooks/use-code-pointers.cjs",
            "timeout": 3,
            "env": { "SPECMEM_PROJECT_PATH": "${cwd}" }
          },
          {
            "type": "command",
            "command": "node /root/.claude/hooks/smart-context-hook.js",
            "timeout": 8,
            "env": {
              "SPECMEM_HOME": "/root/.specmem",
              "SPECMEM_PKG": "/specmem",
              "SPECMEM_RUN_DIR": "${cwd}/specmem/sockets",
              "SPECMEM_EMBEDDING_SOCKET": "${cwd}/specmem/sockets/embeddings.sock",
              "SPECMEM_PROJECT_PATH": "${cwd}",
              "SPECMEM_SEARCH_LIMIT": "3",
              "SPECMEM_THRESHOLD": "0.25",
              "SPECMEM_MAX_CONTENT": "150"
            }
          }
        ]
      },
      {
        "matcher": "Glob",
        "hooks": [
          {
            "type": "command",
            "command": "node /root/.claude/hooks/team-comms-enforcer.cjs",
            "timeout": 2,
            "env": { "SPECMEM_PROJECT_PATH": "${cwd}" }
          },
          {
            "type": "command",
            "command": "node /root/.claude/hooks/use-code-pointers.cjs",
            "timeout": 3,
            "env": { "SPECMEM_PROJECT_PATH": "${cwd}" }
          },
          {
            "type": "command",
            "command": "node /root/.claude/hooks/smart-context-hook.js",
            "timeout": 8,
            "env": {
              "SPECMEM_HOME": "/root/.specmem",
              "SPECMEM_PKG": "/specmem",
              "SPECMEM_RUN_DIR": "${cwd}/specmem/sockets",
              "SPECMEM_EMBEDDING_SOCKET": "${cwd}/specmem/sockets/embeddings.sock",
              "SPECMEM_PROJECT_PATH": "${cwd}",
              "SPECMEM_SEARCH_LIMIT": "3",
              "SPECMEM_THRESHOLD": "0.25",
              "SPECMEM_MAX_CONTENT": "150"
            }
          }
        ]
      },
      {
        "matcher": "Bash",
        "hooks": [
          {
            "type": "command",
            "command": "node /root/.claude/hooks/team-comms-enforcer.cjs",
            "timeout": 2,
            "env": { "SPECMEM_PROJECT_PATH": "${cwd}" }
          },
          {
            "type": "command",
            "command": "node /root/.claude/hooks/agent-output-interceptor.js",
            "timeout": 3
          }
        ]
      },
      {
        "matcher": "Task",
        "hooks": [
          {
            "type": "command",
            "command": "node /root/.claude/hooks/agent-loading-hook.js",
            "timeout": 20,
            "statusMessage": "Deploying team member...",
            "env": {
              "SPECMEM_HOME": "/root/.specmem",
              "SPECMEM_PKG": "/specmem",
              "SPECMEM_RUN_DIR": "${cwd}/specmem/sockets",
              "SPECMEM_EMBEDDING_SOCKET": "${cwd}/specmem/sockets/embeddings.sock",
              "SPECMEM_PROJECT_PATH": "${cwd}",
              "SPECMEM_SEARCH_LIMIT": "5",
              "SPECMEM_THRESHOLD": "0.30",
              "SPECMEM_MAX_CONTENT": "200"
            }
          }
        ]
      },
      {
        "matcher": "TaskOutput",
        "hooks": [
          {
            "type": "command",
            "command": "node /root/.claude/hooks/agent-output-interceptor.js",
            "timeout": 3
          }
        ]
      },
      {
        "matcher": "mcp__specmem__find_memory",
        "hooks": [
          {
            "type": "command",
            "command": "node /root/.claude/hooks/team-comms-enforcer.cjs",
            "timeout": 2,
            "env": { "SPECMEM_PROJECT_PATH": "${cwd}" }
          }
        ]
      },
      {
        "matcher": "mcp__specmem__find_code_pointers",
        "hooks": [
          {
            "type": "command",
            "command": "node /root/.claude/hooks/team-comms-enforcer.cjs",
            "timeout": 2,
            "env": { "SPECMEM_PROJECT_PATH": "${cwd}" }
          }
        ]
      }
    ],
    "SessionStart": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "node /root/.claude/hooks/specmem-session-start.cjs",
            "timeout": 30,
            "statusMessage": "Loading SpecMem context...",
            "env": {
              "SPECMEM_PROJECT_PATH": "${cwd}",
              "SPECMEM_RUN_DIR": "${cwd}/specmem/sockets",
              "SPECMEM_EMBEDDING_SOCKET": "${cwd}/specmem/sockets/embeddings.sock",
              "SPECMEM_SEARCH_LIMIT": "5",
              "SPECMEM_THRESHOLD": "0.25",
              "SPECMEM_MAX_CONTENT": "300"
            }
          }
        ]
      }
    ],
    "Stop": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "node /root/.claude/hooks/specmem-stop-hook.js",
            "timeout": 15,
            "env": {
              "SPECMEM_PROJECT_PATH": "${cwd}",
              "SPECMEM_RUN_DIR": "${cwd}/specmem/sockets",
              "SPECMEM_EMBEDDING_SOCKET": "${cwd}/specmem/sockets/embeddings.sock"
            }
          }
        ]
      },
      {
        "hooks": [
          {
            "type": "command",
            "command": "node /root/.claude/hooks/specmem-drilldown-hook.js",
            "timeout": 15
          }
        ]
      }
    ],
    "PostToolUse": [
      {
        "matcher": "Task",
        "hooks": [
          {
            "type": "command",
            "command": "node /root/.claude/hooks/task-progress-hook.js",
            "timeout": 20,
            "statusMessage": "Team member finished",
            "env": {
              "SPECMEM_HOME": "/root/.specmem",
              "SPECMEM_PKG": "/specmem",
              "SPECMEM_RUN_DIR": "${cwd}/specmem/sockets",
              "SPECMEM_EMBEDDING_SOCKET": "${cwd}/specmem/sockets/embeddings.sock",
              "SPECMEM_PROJECT_PATH": "${cwd}"
            }
          }
        ]
      },
      {
        "matcher": "Write",
        "hooks": [
          {
            "type": "command",
            "command": "node /root/.claude/hooks/post-write-memory-hook.cjs",
            "timeout": 10,
            "env": {
              "SPECMEM_HOME": "/root/.specmem",
              "SPECMEM_PKG": "/specmem",
              "SPECMEM_RUN_DIR": "${cwd}/specmem/sockets",
              "SPECMEM_EMBEDDING_SOCKET": "${cwd}/specmem/sockets/embeddings.sock",
              "SPECMEM_PROJECT_PATH": "${cwd}"
            }
          }
        ]
      },
      {
        "matcher": "Edit",
        "hooks": [
          {
            "type": "command",
            "command": "node /root/.claude/hooks/post-write-memory-hook.cjs",
            "timeout": 10,
            "env": {
              "SPECMEM_HOME": "/root/.specmem",
              "SPECMEM_PKG": "/specmem",
              "SPECMEM_RUN_DIR": "${cwd}/specmem/sockets",
              "SPECMEM_EMBEDDING_SOCKET": "${cwd}/specmem/sockets/embeddings.sock",
              "SPECMEM_PROJECT_PATH": "${cwd}"
            }
          }
        ]
      }
    ],
    "PreCompact": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "node /root/.claude/hooks/specmem-precompact.js",
            "timeout": 60,
            "statusMessage": "Saving context before compaction...",
            "env": {
              "SPECMEM_HOME": "/root/.specmem",
              "SPECMEM_PKG": "/specmem",
              "SPECMEM_RUN_DIR": "${cwd}/specmem/sockets",
              "SPECMEM_EMBEDDING_SOCKET": "${cwd}/specmem/sockets/embeddings.sock",
              "SPECMEM_PROJECT_PATH": "${cwd}"
            }
          }
        ]
      }
    ],
    "SubagentStart": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "node /root/.claude/hooks/subagent-loading-hook.js",
            "timeout": 5,
            "statusMessage": "Starting subagent..."
          }
        ]
      }
    ],
    "SubagentStop": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "node /root/.claude/hooks/subagent-loading-hook.js",
            "timeout": 5,
            "statusMessage": "Subagent completed"
          }
        ]
      }
    ]
  },
  "permissions": {
    "allow": [
      "mcp__specmem__*",
      "Skill(specmem)",
      "Skill(specmem-*)",
      "Read",
      "Read(*)",
      "Grep",
      "Grep(*)",
      "Glob",
      "Glob(*)",
      "Bash",
      "Write",
      "Edit"
    ],
    "deny": []
  }
}
